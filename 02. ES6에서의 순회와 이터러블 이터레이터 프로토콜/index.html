<script>const log = console.log;</script>

<!-- 리스트 순회 -->
<script>

    const list = [1, 2, 3];
    for (var i=0; i<list.length; i++)
        log(list[i]);

    const str = 'abc';
    for (var i=0; i<str.length; i++)
        log(str[i]);

    for (const a of list)
        log(a);
    
    for (const a of str)
        log(a);

</script>

<!-- 이터러블/이터레이터 프로토콜 -->
<script>
    log('<!-- 이터러블/이터레이터 프로토콜 -->');
    log('Arr -------------------');
    const arr = [1, 2, 3];
    let iter = arr[Symbol.iterator]();
    iter.next();
    iter.next();
    log(arr[Symbol.iterator]);
    for (const a of iter)    log(a);
    // for (const a of arr)    log(a);
</script>

<script>
    log('Set -------------------');
    const set = new Set([1, 2, 3]);
    log(set[Symbol.iterator]);
    for (const a of set)    log(a);
</script>

<script>
    log('Map -------------------');
    const map = new Map([['a', 1], ['b', 2], ['c', 3]]);
    log(map[Symbol.iterator]);
    for (const a of map)    log(a);
    for (const a of map.keys()) log(a);
    for (const a of map.values()) log(a);
    for (const a of map.entries()) log(a);
</script>

<!-- 사용자 정의 이터러블 -->
<script>
    log('<!-- 사용자 정의 이터러블 -->');
    const iterable = {
        [Symbol.iterator]() {
            let i = 3;
            return {
                next() {
                    return i == 0 ? { done: true} : { value: i--, done: false };
                },
                [Symbol.iterator]() { return this; }
            }
        }
    };

    let iterator = iterable[Symbol.iterator]();
    log(iterator.next());
    // log(iterator.next());
    // log(iterator.next());
    // log(iterator.next());
    // log(iterator.next());

    for (const a of iterator)   log(a);

    for (const a of document.querySelectorAll('*')) log(a);
    const all = document.querySelectorAll('*');
    let iter3 = all[Symbol.iterator]();
    log(iter3.next());
    log(iter3.next());
    log(iter3.next());
</script>

<!-- 전개 연산자 -->
<script>
    console.clear();
    log('<!-- 전개 연산자 -->');
    const a = [1, 2];
    // a[Symbol.iterator] = null;
    log([...a, ...[3, 4]]);
</script>